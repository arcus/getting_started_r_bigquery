{
  "hash": "a15607702bdd8bfe9d4f1568cae264f4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Getting Started: R and BigQuery\"\nformat: \n  revealjs:\n    theme: [serif, custom.scss]\n    scrollable: true\n    footer: Joy Payton, Children's Hospital of Philadelphia\n    css: styles.css\neditor: visual\n---\n\n\n------------------------------------------------------------------------\n\nThis slide deck was built in Quarto!\n\n-   Use keyboard arrow keys to\n    -   advance ( → ) and\n    -   go back ( ← )\n-   Type \"s\" to see speaker notes\n-   Type \"?\" to see other keyboard shortcuts\n\n\n::: {.cell}\n\n:::\n\n\n# SQL Refresher {.smaller}\n\nThis is the pattern we'll come back to again and again in SQL (Structured Query Language):\n\n`SELECT + FROM + WHERE;`\n\n| cabin | high_score | wins | losses |\n|--|--|---|---|\n| Yellow | 10 |3 |0|\n|Blue |7 |2 |1 |\n|Orange |9 |1| 2|\n\nFor example: `SELECT cabin, high_score FROM camp_kickball_tournament WHERE high_score < 10`\n\n\n::: notes \n\nSQL, or Structured Query Language, is used to get information from a database that stores data in tables. Tables have rows, which are individual records, and columns, which are the values that are included in a record. \n\nWe use a common pattern in SQL: SELECT plus some column names, FROM plus a table name, and WHERE plus some row conditions.\n\nConsider, for example, this pretend table called camp_kickball_tournament.  If we wanted to extract just some data from this table, we could use the SELECT statement to indicate which columns, and the WHERE statement to indicate a filter to help determine which rows matched.  The FROM gives us the table name to look in.\n:::\n\n# Aliases (AS) \n\nAliases allow you to (re)name things:\n\n```\nSELECT \n  cabin, \n  high_score, \n  wins/(wins + losses) AS prop_win   \nFROM camp_kickball_tournament \nWHERE high_score < 10;\n```\n\n::: notes\n\nYou can use aliases to make things easier to read, by creating shortened names for things, renaming things that don't already have intuitive names, or calculating computed data and naming that data.\n\n:::\n\n# Whitespace / Capitalization {.smaller}\n\nWhich is easier to read?\n\n\n::: {.columns .v-center-container}\n::: {.column width=\"40%\"}\n```\nSELECT \n  cabin, \n  high_score, \n  wins/(wins + losses) AS prop_win \nFROM camp_kickball_tournament \nWHERE high_score < 10;\n```\n:::\n::: {.column width=\"60%\"}\n\n```\nselect cabin,high_score,wins/(wins + losses) as prop_win from camp_kickball_tournament where high_score < 10;\n```\n:::\n:::\n\n* Be consistent (reduce cognitive load on teammates / future you) \n* Capitalize key words so they stand out \n* Indent the parts of your query \n* Consider using a new line for every field\n\n::: notes \nBoth of these are valid SQL syntax and do the same thing, but one will make future-you happier.\n\nLots of digital ink has been spilled on the \"right\" way to structure SQL queries but it boils down to:\n\n* Be consistent (reduce cognitive load on teammates / future you) \n* Capitalize key words so they stand out \n* Indent the parts of your query \n* Consider using a new line for every field\n\n:::\n\n# Query Button {.smaller}\n\nUse the \"Query\" button (or the one with the magnifying glass) when you're looking within a table to avoid annoying syntax issues like having to type fully qualified table names (`project.dataset.table`).\n\n![](media/query_button.png){.bordered .one-third}\n\n::: notes\nBigQuery requires fully qualified table names, where you include the project name, the dataset name, and the table name, all separated by periods and enclosed in backticks (not the same as single quotes).  This can be challenging to learn and hard to type correctly.\n\nSkip the headache by starting with the \"Query\" button with the magnifying glass.  If you're zoomed in or there's not much screen real estate, this button might appear with only the magnifying glass.  This button is available when you're looking at the details of a particular table, and it will give you the start of a query with the table name included!\n\n:::\n\n# Queries in BigQuery  {.smaller}\n\nOnce you click \"Query Table\" (and then \"New Tab\" or whatever you prefer), you'll see a partial query, with the cursor located so that you can add fields after SELECT.\n\n![](media/boilerplate_query.png){.bordered}\n\nYou'll also see warnings that your query is invalid.  That's expected!\n\n::: notes\nWhen you start a new query this way, you'll be given the start of a query with the table name included, and your cursor in the SELECT statement, where you could just type in a field name or two or three, separated by commas.\n\nYou'll also see red warnings that your query is invalid.  That's expected, because your query is in fact incomplete... you haven't indicated which fields you want in your SELECT statement.  You can hover over the error to get an explanation.\n:::\n\n# Your First Query {.smaller}\n\n::: {.columns .v-center-container}\n::: {.column width=\"60%\"}\n* You might have to adjust your pane widths to see all the buttons you need.\n* Please click on the table in the CDC data (`sdoh_cdc_wonder_natality`) called `county_natality`. * Click on the \"query\" button and choose \"In split tab\".\n* Add one or more fields from the schema of the table between the words \"SELECT\" and \"FROM\" in the query.\n* When you get a green check mark showing that your query is valid, click the blue \"Run\" button above your query.\n:::\n::: {.column width=\"40%\"}\n![](media/first_query){.bordered}\n:::\n:::\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_60ae6be4\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">03</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n::: notes\nOK, so you're going to issue the first SQL query in the workshop today.  Note that you might have to adjust your pane widths to see all the buttons you need.\n\nI'd like for you to look in your starred datasets, and  click on the table in the CDC data called `county_natality`.\n\nThen, click on the query button, which will have a magnifying glass, and choose \"new tab.\"  That will allow you to see the Schema and the Query on the same screen.\n\nUsing what you know from the Schema, add one or more field names that are valid for this table in the SQL query, right after the word SELECT.\n\nWhen you get a green check mark showing that your query is valid, click the blue \"Run\" button above your query.\n\nI'll give everyone 3 minutes for this.\n\n\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/countdown-0.4.0/countdown.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/countdown-0.4.0/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}